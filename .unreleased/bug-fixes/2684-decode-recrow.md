Fixed a bug when decoding certain record types, see #2684
